## 调和/协调 (Reconciliation) 过程与 Diff 算法

虚拟 DOM 通过如 ReactDOM 等类库使之与 "真实" 的 DOM 同步，这一过程叫做 协调（调和） 
> 或者说是：`将 虚拟 DOM 映射到真实 DOM 的过程`

React15 栈调和 -------------> React16 Fiber调和

调和过程不完全等同于 Diff
- 调和是 "使一致"
- Diff 是 "找不同"

React 源码划分为：
- Core
- Renderer
- Reconciler 调和器 （包括 组件的挂载、卸载、更新等过程）
**更新过程涉及对 Diff 算法的调用，Diff 是调和过程中最具代表性的一环**

### Diff
问 React15 的栈调和可以理解为对 Diff 的了解

传统方法：循环递归进行树节点的一一对比，时间复杂度：O(n³)

而理想复杂度为 O(1) | O(n)

React Diff 优化规律：
- 若两个组件属于同一个类型，那么它们有`相同的 DOM 树形结构`
- 处于`同一层级的一组子节点`，可以通过设置 `key` 作为唯一标识，从而维持各个节点在不同渲染过程中的稳定性
- DOM 节点之间的跨层级操作并不多，同层级操作是主流

React Diff 思路：
1. Diff 算法性能突破的关键点在于 "分层对比"
2. 类型一致的节点才有继续 Diff 的必要性
3. key 属性的设置，可以帮我们尽可能重用同一层级内的节点

    key 是用来帮助 React 识别哪些内容被更改、添加或者删除。   
    key 需要写在用数组渲染出来的元素内部，并且赋予一个**稳定**的值    
    如果 key 发生了改变，React 会触发 UI 的重渲染

